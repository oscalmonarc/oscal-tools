<h1>Overlays</h1>

<table id="myDataTable"  class="table table-striped table-bordered"  style="width:100%">
  <thead>
    <tr>
      <th>Name</th>
      <th>Provider</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
 <tbody>
	    <% @overlays.each do |overlay| %>
	      	<tr>
	      		<td> <%= overlay.click_link%> </td>
	      		<td> <%= overlay.provider.name %> </td>
	      		<td>
	      			<table class="table table-striped table-bordered"  style="width:100%">
				      	<tr>
							<% overlay.overlay_fields.each do |the_field| 
								options = the_field.overlay_field_options
								options_count = options.count
								if (options_count < 1 )
									options_count = 1
								end %>
								<td colspan="<%= options_count %>" align="center"> <%= the_field.name %> </td>
							<% end %>
						 </tr>
						 <tr>
							<% overlay.overlay_fields.each do |the_field| 
								options = the_field.overlay_field_options
								options.each do |option| %>
									<td><%= option.name %></td>
								<% end %>	
							<% end %>
						</tr>
					</table>
				</td>
				<td><%= link_to 'Edit', edit_overlay_path(overlay) %></td>
		        <td><%= link_to 'Destroy', overlay, method: :delete, data: { confirm: 'Are you sure?' } %></td>
			</tr>
	<% end %> 
</table>

<br>

<%= button_to 'New Overlay', new_overlay_path, method: :get %>

<script>
$(document).ready(function() {
    $('#myDataTable').DataTable( {
    	"aaSorting": [],
    	dom: 'Bfrtip',
        buttons: [
            'copy', 'csv', 'excel', 'pdf', 'print'
        ]
    } );
} );
	
</script>